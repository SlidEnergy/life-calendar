<div class="year" ng-repeat="year in bricks">
	<span class="year-tooltip">{{year.yearTooltip}}</span>
	<div class="brick" ng-repeat="brick in year" ng-style="{
		'background': brick.color, 
		'outline': brick.outline,
		'border': brick.border
	}" ng-class="{'important-brick': brick.importantTooltip}" ng-attr-title="{{brick.title}}" ng-click="showPopup($event, brick)">
		<span class="brick-tooltip" ng-if="brick.year == 0">{{brick.brickTooltip}}</span>
	</div>
	<div class="life-calendar-label" ng-if="year.labelForBasic" ng-style="{ 'color': year.colorForBasic }">- {{year.labelForBasic}}</div>
</div>
<div class="brick-popup" ng-init="popup">
	<div dx-popup="{
		width: 500,
		height: 300,
		contentTemplate: 'info',
		showTitle: true,
		dragEnabled: true,
		closeOnOutsideClick: true,
		shading: false,
		position: {
			of: '.brick-popuped',
			my: 'top',
			at: 'bottom'
		},
		bindingOptions: {
			visible: 'visiblePopup',
			title: 'popup.brick.stringDate'
		}
	}">
		<div class="brick-popup" data-options="dxTemplate: { name:'info' }">
			<span>Периоды с прошлой недели:</span>
			<ul>
				<li ng-repeat="period in popup.prevPeriods"><span class="brick" ng-style="{ 'background': period.color }"></span> {{period.text + ' (начало с ' + dateFormatter(period.start) + ')'}} <a class="brick-popup-button" href="javascript:;" ng-click="prolongPeriod(popup.brick, period)">продлить</a></li>
			</ul>
		</div>
	</div>
</div>